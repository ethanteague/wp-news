jQuery(document).ready(function(t){function e(t){var e=/^([a-zA-Z0-9_.+-])+\@(([a-zA-Z0-9-])+\.)+([a-zA-Z0-9]{2,4})+$/;return e.test(t)}function i(t,e,i){if(0===i)document.cookie=t+"="+e+";path=/;";else{var a=new Date;a.setTime(a.getTime()+24*i*60*60*1e3),document.cookie=t+"="+e+";path=/;expires="+a.toUTCString()}}function a(t){var e="; "+document.cookie,i=e.split("; "+t+"=");return 2===i.length?i.pop().split(";").shift():!1}t(document).on("submit",".fca_eoi_form",function(o){o.preventDefault();var r,n=jQuery(this),c=jQuery("[name=email]",n),l=jQuery("[name=name]:visible",n),s=l.val(),_=c.val(),d=n.data("fca_eoi_list_id"),f=jQuery("[type=submit]",n),u=!1,p=n.data("fca_eoi_thank_you_mode"),m=n.data("fca_eoi_thank_you_page"),v=n.data("fca_eoi_success_cookie_duration"),h=n.data("fca_eoi_sub_msg"),y=!1,j=jQuery("[name=fca_eoi_form_id]",n).val();return t("[name=email], [name=name]",n).not(".tooltipstered").each(function(){var t=jQuery(this),e=.8*t.width();t.tooltipster({contentAsHTML:!0,fixedWidth:e,minWidth:e,maxWidth:e,trigger:"none",theme:["tooltipster-borderless","tooltipster-optin-cat"]})}),jQuery("[name=email], [name=name]",jQuery(this)).focus(function(){var t=jQuery(this),e=jQuery("[type=submit]",t.closest(".fca_eoi_form")),i=e.data("fca_eoi_initial_val");"undefined"!=typeof i&&e.val(i),jQuery(this).tooltipster("hide")}),f.data("fca_eoi_initial_val")?r=f.data("fca_eoi_initial_val"):(r=f.val(),f.data("fca_eoi_initial_val",r)),f.val(r),fcaEoiScriptData.invalid_email=n.find(".fca_eoi_error_texts_email").val(),fcaEoiScriptData.field_required=n.find(".fca_eoi_error_texts_required").val(),_&&e(_)||(c.tooltipster("content",_?fcaEoiScriptData.invalid_email:fcaEoiScriptData.field_required),c.tooltipster("show"),f.val("✗ "+r),y=!0),l.length&&!s&&(l.tooltipster("content",fcaEoiScriptData.field_required),l.tooltipster("show"),f.val("✗ "+r),y=!0),y?!1:(f.val(h),f.click(function(t){t.preventDefault()}),f.attr("style","cursor: default"),void jQuery.ajax({url:fcaEoiScriptData.ajax_url,data:{email:_,name:s,action:"fca_eoi_subscribe",list_id:d,form_id:j,nonce:fcaEoiScriptData.nonce},type:"POST",datatype:"text",timeout:15e3}).done(function(t){if("ajax"==p){if("✓"===t){f.val(t+" "+r),i("fca_eoi_success_"+j,Math.floor(Date.now()/1e3),v);var e=JSON.parse(a("fca_eoi_active_optins"));Array.isArray(e)||(e=[]);var o=e.indexOf(j);-1!==o&&e.splice(o,1),i("fca_eoi_active_optins",JSON.stringify(e))}else f.val(t);clearInterval(u),m&&"✓"===t&&(tooltipWidth=f.width(),f.tooltipster({contentAsHTML:!0,trigger:"none",fixedWidth:tooltipWidth,minWidth:tooltipWidth,maxWidth:tooltipWidth,arrow:!1,theme:["tooltipster-borderless","tooltipster-optin-cat"]}),f.tooltipster("content",m),f.tooltipster("show"),c.prop("disabled",!0),l.prop("disabled",!0),jQuery(".tooltipster-content").css("background-color","#148544"))}else window.location.href=m}))})});